<div *ngIf="info$ | async as info">
    <div *ngIf="getActivePage(info.pages) as activePage" class="header">
        <h2>{{ info.name }}</h2>
        <mat-slide-toggle *ngIf="activePage.editable" [formControl]="formControlEditMode" class="slide" (change)="changeEditMode($event.checked, activePage.editingPersonName)">{{ 'draw.editMode' | translate }}</mat-slide-toggle>
    </div>
    <div class="site header">
        <canvas #canvas [ngClass]="{ 'active-page': true, 'hidden': !(editMode$ | async) }"></canvas>
        <div *ngIf="getActivePage(info.pages) as activePage">
            <div *ngIf="!(editMode$ | async)" class="active-page-wrapper">
                <img *ngIf="activePage.dataUrl; else emptyActiveImage" [src]="activePage.dataUrl" class="active-page">
                <ng-template #emptyActiveImage>
                    <div class="active-page active-image-empty">{{ 'draw.empty' | translate }}</div>
                </ng-template>
            </div>
        </div>
        <div class="page-collection">
            <button *ngIf="info.editable" mat-flat-button color="primary" (click)="createPage()" class="add-page">{{ 'draw.addPage' | translate }}</button>
            <div *ngFor="let page of info.pages" class="page">
                <div [ngClass]="{ 'active': pageId$.value === page.pageId, 'drawing': true, 'pointer': true }" (click)="openPage(page.pageId)">
                    <img *ngIf="page.dataUrl; else emptyImage" [src]="page.dataUrl" class="drawing-image">
                    <ng-template #emptyImage>
                        <div class="drawing-image empty-image">
                            <div>{{ 'draw.empty' | translate }}</div>
                        </div>
                    </ng-template>
                </div>
                <div class="action-bar">
                    <div class="action">
                        <mat-icon *ngIf="page.editable" (click)="editPage(page.pageId, page.editingPersonName)" class="pointer">edit</mat-icon>
                    </div>
                    <div class="action">
                        <mat-icon *ngIf="page.deletable" (click)="deletePage(page.pageId, info.pages)" class="pointer">delete</mat-icon>
                    </div>
                    <div class="action profile-image">
                        <img *ngIf="!!page.editingPersonName && !!page.editingPersonProfileImagePath" [src]="page.editingPersonProfileImagePath" [matTooltip]="page.editingPersonName">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>